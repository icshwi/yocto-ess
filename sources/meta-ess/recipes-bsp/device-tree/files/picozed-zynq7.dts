/*
 * Avnet PicoZed board DTS
 * Modified for FPGA-IOC
 */ 
 
/dts-v1/;
/include/ "zynq-7000.dtsi"
/include/ "zynq-7000-qspi-dummy.dtsi"

/ {
    model = "Avnet picoZed / FPGA-IOC";
    compatible = "avnet,picozed", "xlnx,zynq-7000";

    ref40: ref40M {
        compatible = "fixed-clock";
        #clock-cells = <0>;
        clock-frequency = <40000000>;
    };

    aliases {
        ethernet0 = &gem0;
        serial0 = &uart0;
        serial1 = &uart1;
        mmc0 = &sdhci1;
    };

    memory {
        device_type = "memory";
        reg = <0x0 0x40000000>;
    };

    chosen {
        bootargs = "earlyprintk console=ttyPS0,115200 root=/dev/mmcblk0p2 rw rootdelay=2 rootfstype=ext3";
        stdout-path = "serial0:115200n8";
    };

    usb_phy0: phy0 {
        compatible = "usb-nop-xceiv";
        #phy-cells = <0>;
        reset-gpios = <&gpio0 7 1>; /* MIO 7, GPIO_ACTIVE_LOW */
    };
};

&gem0 {
    status = "okay";
    phy-mode = "rgmii-id";
    phy-handle = <&ethernet_phy>;

    ethernet_phy: ethernet-phy@0 {
        device_type = "ethernet-phy";
        reg = <0>;
    };
};

&sdhci0 {
    status = "disabled";
}; 

&sdhci1 {
    status = "okay";
    /* SD1 is connected to a non-removable eMMC flash device */
    non-removable;
};

&uart0 {
    status = "okay";
};

&uart1 {
    status = "okay";
};

&i2c0 {
    status = "okay";

    miniioc@1f {
        compatible = "linux,slave-miniioc";
        reg = <0x1f>;
    };

};

&i2c1 {
    status = "okay";
    clock-frequency = <400000>;

    i2c-mux@75 {
        compatible = "nxp,pca9546";
        #address-cells = <1>;
        #size-cells = <0>;
        reset-gpios = <&gpio0 42 1>;
        reg = <0x75>;

        i2c@0 {
            #address-cells = <1>;
            #size-cells = <0>;
            reg = <0>;
            si5332@6a {
                compatible = "linux,si5332";
                reg = <0x6a>;
            };
        };

        i2c@1 {
            #address-cells = <1>;
            #size-cells = <0>;
            reg = <1>;

            pca9541a@77 {
                compatible = "nxp,pca9541";
                reg = <0x77>;

                i2c-arb {
                    #address-cells = <1>;
                    #size-cells = <0>;
/*
 -- These devices are on the i2c bus, but do not have linux drivers
                    pac1934-0@10 {
                        reg = <0x10>;
                    };

                    pac1934-1@11 {
                        reg = <0x11>;
                    };

                    temp@49 {
                        reg = <0x49>;
                    };

                    adp5051@4a {
                        reg = <0x4a>;
                    };
*/
                    svc-eth-mac@50 {
                        compatible = "atmel,24c02";
                        reg = <0x50>;
                    };

                    zynq-eth-mac@52 {
                        compatible = "atmel,24c02";
                        reg = <0x52>;
                    };

                    zynq-sfp-mac@53 {
                        compatible = "atmel,24c02";
                        reg = <0x53>;
                    };

                    rtc@69 {
                        compatible = "abracon,ab0805";
                        reg = <0x69>;
                        abracon,tc-diode = "standard";
                    };
                };
            };
        };

        i2c@2 {
            #address-cells = <1>;
            #size-cells = <0>;
            reg = <2>;
        };

        i2c@3 {
            #address-cells = <1>;
            #size-cells = <0>;
            reg = <3>;
        };
    };
};

&usb0 {
    status = "disabled";
    dr_mode = "host";
    usb-phy = <&usb_phy0>;
};

&qspi {
    status = "disabled";
};

&spi0 {
    status = "okay";
    SY87739L@0{
        compatible="spidev";
        reg = <0>; //chipselect 0
        spi-max-frequency= <250000>;
    };
};

