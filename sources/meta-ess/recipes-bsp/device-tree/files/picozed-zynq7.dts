/*
 * Avnet PicoZed board DTS
 * Modified for FPGA-IOC
 */ 
 
/dts-v1/;
/include/ "zynq-7000.dtsi"
/include/ "zynq-7000-qspi-dummy.dtsi"

/ {
	model = "Avnet picoZed / FPGA-IOC";
	compatible = "avnet,picozed", "xlnx,zynq-7000";

	aliases {
		ethernet0 = &gem0;
		serial0 = &uart0;
		serial1 = &uart1;
		mmc0 = &sdhci1;
	};

	memory {
		device_type = "memory";
		reg = <0x0 0x40000000>;
	};

	chosen {
		bootargs = "earlyprintk console=ttyPS0,115200 root=/dev/mmcblk0p2 rw rootdelay=2 rootfstype=ext3";
		stdout-path = "serial0:115200n8";
	};

	usb_phy0: phy0 {
		compatible = "usb-nop-xceiv";
		#phy-cells = <0>;
		reset-gpios = <&gpio0 7 1>; /* MIO 7, GPIO_ACTIVE_LOW */
	};
};

&gem0 {
	status = "okay";
	phy-mode = "rgmii-id";
	phy-handle = <&ethernet_phy>;

	ethernet_phy: ethernet-phy@0 {
		device_type = "ethernet-phy";
		reg = <0>;
	};
};

&sdhci0 {
	status = "disabled";
}; 

&sdhci1 {
	status = "okay";
	/* SD1 is connected to a non-removable eMMC flash device */
	non-removable;
};

&uart0 {
	status = "okay";
};

&uart1 {
	status = "okay";
};

&i2c0 {
	status = "okay";

	miniioc@1f {
		compatible = "linux,slave-miniioc";
		reg = <0x1f>;
	};

};

&i2c1 {
	status = "okay";
	clock-frequency = <400000>;
};
 
&usb0 {
	status = "disabled";
	dr_mode = "host";
	usb-phy = <&usb_phy0>;
};

&qspi {
	status = "disabled";
};

&spi0 {
	status = "okay";
    SY87739L@0{
        compatible="spidev";
    	reg = <0>; //chipselect 0
    	spi-max-frequency= <250000>;
    };
};

